<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chatbot Integration</title>
</head>
<body>
  <h1>ðŸŽ‰ Congratulations23!</h1>
  <p>This is your bot</p>

  <!-- Embed the Salesforce Chatbot -->
  <iframe id="embeddedMessagingFrame"
    src="https://perryhomes.my.site.com/ESWChatBotMessageforwe1744836953484"
    width="100%"
    height="600"
    style="border: none;"
    title="Salesforce Chatbot"
  ></iframe>

  <!-- Embedded Messaging Initialization -->
  <script type="text/javascript">
    function initEmbeddedMessaging() {
      try {
        embeddedservice_bootstrap.settings.language = 'en_US';
        embeddedservice_bootstrap.init(
          '00DHu00000B6GO5',
          'ChatBot_Message_for_web',
          'https://perryhomes.my.site.com/ESWChatBotMessageforwe1744836953484',
          {
            scrt2URL: 'https://perryhomes.my.salesforce-scrt.com'
          }
        );
      } catch (err) {
        console.error('Error loading Embedded Messaging: ', err);
      }
    }
  </script>

  <!-- User Input Control Styles -->
  <script type="text/javascript">
    function removeStylesheet() {
      const style = document.createElement('style');
      style.id = 'embeddedMessagingBootstrapStyles';
      style.type = 'text/css';
      style.innerHTML = `
        .slds-file-selector.slds-file-selector_files, .emojiButtonWrapper {
          display: none !important;
        }
        .embeddedMessagingInputFooterTextArea.slds-textarea {
          caret-color: auto !important;
          background-color: white !important;
          pointer-events: auto !important;
          user-select: auto !important;
        }
        .embeddedMessagingInputTextAreaWrapper {
          cursor: allowed !important;
        }
      `;
      document.head.appendChild(style);
    }

    function addBlockStylesheet() {
      const style = document.createElement('style');
      style.id = 'embeddedMessagingBootstrapStyles';
      style.type = 'text/css';
      style.innerHTML = `
        .slds-file-selector.slds-file-selector_files, .emojiButtonWrapper {
          display: none !important;
        }
        .embeddedMessagingInputFooterTextArea.slds-textarea {
          caret-color: transparent !important;
          background-color: lightgrey !important;
          pointer-events: none !important;
          user-select: none !important;
        }
        .embeddedMessagingInputTextAreaWrapper {
          cursor: not-allowed !important;
        }
      `;
      document.head.appendChild(style);
    }

    window.addEventListener('message', (e) => {
      if (e.data === 'InputEnable') removeStylesheet();
      if (e.data === 'InputDisable') addBlockStylesheet();
    });
  </script>

  <!-- Load Salesforce Bootstrap -->
  <script
    type="text/javascript"
    src="https://perryhomes.my.site.com/ESWChatBotMessageforwe1744836953484/assets/js/bootstrap.min.js"
    onload="initEmbeddedMessaging()"
  ></script>

  <!-- Optional custom chat script -->
  <script type="text/javascript" src="index.js"></script>
</body>
</html>
